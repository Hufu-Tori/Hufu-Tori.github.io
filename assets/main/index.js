System.register("chunks:///_virtual/answer-ui.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,n;return{setters:[function(e){t=e.extends},function(e){n=e.cclegacy}],execute:function(){n._RF.push({},"281925wfyBJtIpohDW7ofxu","answer-ui",void 0);e("AnswerUi",function(){function e(){this.answerUi=null}var n=e.prototype;return n.mount=function(e){this.answerUi=this.createAnswerUi(t({},e)),document.body.appendChild(this.answerUi)},n.unmount=function(){this.answerUi&&(document.body.removeChild(this.answerUi),this.answerUi=null)},n.createAnswerUi=function(e){var t=document.createElement("div");if(t.className="answer-ui",Object.assign(t.style,{width:"100vw",height:"100vh",position:"fixed",top:"0",left:"0"}),e.imageUrl){var n=document.createElement("div");n.className="_image",Object.assign(n.style,{position:"absolute",left:"calc(50% - 300px)",top:"calc(40% - 200px)",width:"600px",height:"400px",display:"flex",backgroundColor:"#d6ccb7","align-items":"center","justify-content":"center"});var i=document.createElement("img");i.setAttribute("src",e.imageUrl),Object.assign(i.style,{"max-width":"calc(100% - 40px)","max-height":"calc(100% - 40px)",display:"block","object-fit":"contain"}),n.appendChild(i),t.appendChild(n)}var o=document.createElement("div");o.className="_question",o.textContent=e.questionContent,Object.assign(o.style,{position:"absolute",left:"0",bottom:"136px",width:"100%",height:"48px",backgroundColor:"#d6ccb7",padding:"8px 16px",display:"flex",alignItems:"center",justifyContent:"flex-start"}),t.appendChild(o);var c=document.createElement("div");c.className="_choices",Object.assign(c.style,{position:"absolute",left:"0",bottom:"0",width:"100%",height:"136px",display:"flex",gap:"16px",padding:"8px",boxSizing:"border-box"}),t.appendChild(c);for(var s=function(t){var n=document.createElement("div");n.className="_choice",n.textContent=e.choiceContents[t],Object.assign(n.style,{width:"calc((100% - 16px * 3) / 4)",height:"120px",backgroundColor:"#354250",color:"#fff",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"}),n.addEventListener("click",(function(){t===e.correctChoiceIndex?e.onCorrect():e.onWrong()})),c.appendChild(n)},a=0;a<4;a++)s(a);return t},e}());n._RF.pop()}}}));

System.register("chunks:///_virtual/base-attack-skill.ts",["./rollupPluginModLoBabelHelpers.js","cc","./skill.ts"],(function(t){var e,n,i;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy},function(t){i=t.Skill}],execute:function(){n._RF.push({},"e9a5dUVpqFN5J5dMBCkZIeP","base-attack-skill",void 0);t("BaseAttackSkill",function(t){function n(){return t.call(this,{id:0,damage:10,mpCost:0,countdown:1,range:4})||this}return e(n,t),n}(i));n._RF.pop()}}}));

System.register("chunks:///_virtual/battle-system.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,i;return{setters:[function(t){e=t.createClass},function(t){i=t.cclegacy}],execute:function(){i._RF.push({},"1843cX1yutM1ZpB0K+wkci5","battle-system",void 0);t("BattleSystem",function(){function t(){this.battle=void 0}var i=t.prototype;return i.update=function(t){if(this.battle)return this.battle.update(t),void(this.battle.isEnd&&(this.battle=void 0))},i.fight=function(t){this.isFight||(this.battle=t,this.battle.fight())},i.answer=function(t){var e;null==(e=this.battle)||e.answer(t)},e(t,[{key:"isFight",get:function(){return!!this.battle}}]),t}());i._RF.pop()}}}));

System.register("chunks:///_virtual/battle.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var i,e;return{setters:[function(t){i=t.createClass},function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"839846ykplHDpFUESYDoA9a","battle",void 0);var s=function(t){return t[t.CORRECT=0]="CORRECT",t[t.WRONG=1]="WRONG",t[t.TIMEOUT=2]="TIMEOUT",t}(s||{});t("Battle",function(){function t(t,i,e,s){this.responseTime=10,this.timeElapsed=0,this.end=!1,this.monsterMates=[],this.player=t,this.monster=i,this.question=e,this.skill=s}var e=t.prototype;return e.update=function(t){this.question.isResponse||(this.remainingTime>0?(console.log("remaining time",this.remainingTime),this.timeElapsed+=t):this.timeout())},e.fight=function(){this.monster.bind(),this.player.fight(this)},e.addMonsterMate=function(t){t.bind(),this.monsterMates.push(t)},e.answer=function(t){this.question.isResponse||(this.question.answer(t),this.question.isCorrect?this.runAction(s.CORRECT):this.runAction(s.WRONG))},e.timeout=function(){this.runAction(s.TIMEOUT)},e.runAction=function(t){switch(t){case s.CORRECT:this.skill.use(),this.monster.applyDamage(this.skill.config.damage);break;case s.WRONG:break;case s.TIMEOUT:this.player.applyDamage(5)}this.monster.unbind(),this.monsterMates.forEach((function(t){return t.unbind()})),this.monsterMates=[],this.player.fightEnd(),this.end=!0},i(t,[{key:"isEnd",get:function(){return this.end}},{key:"remainingTime",get:function(){return Math.max(0,this.responseTime-(this.timeElapsed+2*this.monsterMates.length))}}]),t}());e._RF.pop()}}}));

System.register("chunks:///_virtual/damageable.ts",["./rollupPluginModLoBabelHelpers.js","cc","./world-space-ui.ts"],(function(e){var t,i,a,n,r,o,s,p,c;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,a=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){r=e.cclegacy,o=e._decorator,s=e.CCInteger,p=e.Component},function(e){c=e.WorldSpaceUi}],execute:function(){var h,l,u,m,d,g,f;r._RF.push({},"da1e7Szsl5F74PoABSC0kOD","damageable",void 0);var D=o.ccclass,y=o.property;e("Damageable",(h=D("Damageable"),l=y({type:s,min:1}),u=y({type:s,min:1}),h((g=t((d=function(e){function t(){for(var t,i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return t=e.call.apply(e,[this].concat(r))||this,a(t,"hp",g,n(t)),a(t,"maxHp",f,n(t)),t.onDie=void 0,t.onDamaged=void 0,t}i(t,e);var r=t.prototype;return r.applyDamage=function(e){this.hp<=0||(this.hp-=e,c.instance.damage(e,this.node),this.onDamaged&&this.onDamaged(this.hp,this.maxHp),this.hp<=0&&this.onDie&&this.onDie())},r.reset=function(){this.hp=this.maxHp,this.onDamaged&&this.onDamaged(this.hp,this.maxHp)},t}(p)).prototype,"hp",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 20}}),f=t(d.prototype,"maxHp",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 20}}),m=d))||m));r._RF.pop()}}}));

System.register("chunks:///_virtual/debug-view-runtime-control.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,o,i,n,s,l,r,a,g,h,p,c,C,d,m,u,L;return{setters:[function(t){e=t.applyDecoratedDescriptor,o=t.inheritsLoose,i=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){s=t.cclegacy,l=t._decorator,r=t.Node,a=t.Color,g=t.Canvas,h=t.UITransform,p=t.instantiate,c=t.Label,C=t.RichText,d=t.Toggle,m=t.Button,u=t.director,L=t.Component}],execute:function(){var f,M,b,v,T,S,x,E,I;s._RF.push({},"b2bd1+njXxJxaFY3ymm06WU","debug-view-runtime-control",void 0);var A=l.ccclass,y=l.property;t("DebugViewRuntimeControl",(f=A("internal.DebugViewRuntimeControl"),M=y(r),b=y(r),v=y(r),f((x=e((S=function(t){function e(){for(var e,o=arguments.length,s=new Array(o),l=0;l<o;l++)s[l]=arguments[l];return e=t.call.apply(t,[this].concat(s))||this,i(e,"compositeModeToggle",x,n(e)),i(e,"singleModeToggle",E,n(e)),i(e,"EnableAllCompositeModeButton",I,n(e)),e._single=0,e.strSingle=["No Single Debug","Vertex Color","Vertex Normal","Vertex Tangent","World Position","Vertex Mirror","Face Side","UV0","UV1","UV Lightmap","Project Depth","Linear Depth","Fragment Normal","Fragment Tangent","Fragment Binormal","Base Color","Diffuse Color","Specular Color","Transparency","Metallic","Roughness","Specular Intensity","IOR","Direct Diffuse","Direct Specular","Direct All","Env Diffuse","Env Specular","Env All","Emissive","Light Map","Shadow","AO","Fresnel","Direct Transmit Diffuse","Direct Transmit Specular","Env Transmit Diffuse","Env Transmit Specular","Transmit All","Direct Internal Specular","Env Internal Specular","Internal All","Fog"],e.strComposite=["Direct Diffuse","Direct Specular","Env Diffuse","Env Specular","Emissive","Light Map","Shadow","AO","Normal Map","Fog","Tone Mapping","Gamma Correction","Fresnel","Transmit Diffuse","Transmit Specular","Internal Specular","TT"],e.strMisc=["CSM Layer Coloration","Lighting With Albedo"],e.compositeModeToggleList=[],e.singleModeToggleList=[],e.miscModeToggleList=[],e.textComponentList=[],e.labelComponentList=[],e.textContentList=[],e.hideButtonLabel=void 0,e._currentColorIndex=0,e.strColor=["<color=#ffffff>","<color=#000000>","<color=#ff0000>","<color=#00ff00>","<color=#0000ff>"],e.color=[a.WHITE,a.BLACK,a.RED,a.GREEN,a.BLUE],e}o(e,t);var s=e.prototype;return s.start=function(){if(this.node.parent.getComponent(g)){var t=this.node.parent.getComponent(h),e=.5*t.width,o=.5*t.height,i=.1*e-e,n=o-.1*o,s=this.node.getChildByName("MiscMode"),l=p(s);l.parent=this.node,l.name="Buttons";var r=p(s);r.parent=this.node,r.name="Titles";for(var u=0;u<2;u++){var L=p(this.EnableAllCompositeModeButton.getChildByName("Label"));L.setPosition(i+(u>0?450:150),n,0),L.setScale(.75,.75,.75),L.parent=r;var f=L.getComponent(c);f.string=u?"----------Composite Mode----------":"----------Single Mode----------",f.color=a.WHITE,f.overflow=0,this.labelComponentList[this.labelComponentList.length]=f}n-=20;for(var M=0,b=0;b<this.strSingle.length;b++,M++){b===this.strSingle.length>>1&&(i+=200,M=0);var v=b?p(this.singleModeToggle):this.singleModeToggle;v.setPosition(i,n-20*M,0),v.setScale(.5,.5,.5),v.parent=this.singleModeToggle.parent;var T=v.getComponentInChildren(C);T.string=this.strSingle[b],this.textComponentList[this.textComponentList.length]=T,this.textContentList[this.textContentList.length]=T.string,v.on(d.EventType.TOGGLE,this.toggleSingleMode,this),this.singleModeToggleList[b]=v}i+=200,this.EnableAllCompositeModeButton.setPosition(i+15,n,0),this.EnableAllCompositeModeButton.setScale(.5,.5,.5),this.EnableAllCompositeModeButton.on(m.EventType.CLICK,this.enableAllCompositeMode,this),this.EnableAllCompositeModeButton.parent=l;var S=this.EnableAllCompositeModeButton.getComponentInChildren(c);this.labelComponentList[this.labelComponentList.length]=S;var x=p(this.EnableAllCompositeModeButton);x.setPosition(i+90,n,0),x.setScale(.5,.5,.5),x.on(m.EventType.CLICK,this.changeTextColor,this),x.parent=l,(S=x.getComponentInChildren(c)).string="TextColor",this.labelComponentList[this.labelComponentList.length]=S;var E=p(this.EnableAllCompositeModeButton);E.setPosition(i+200,n,0),E.setScale(.5,.5,.5),E.on(m.EventType.CLICK,this.hideUI,this),E.parent=this.node.parent,(S=E.getComponentInChildren(c)).string="Hide UI",this.labelComponentList[this.labelComponentList.length]=S,this.hideButtonLabel=S,n-=40;for(var I=0;I<this.strMisc.length;I++){var A=p(this.compositeModeToggle);A.setPosition(i,n-20*I,0),A.setScale(.5,.5,.5),A.parent=s;var y=A.getComponentInChildren(C);y.string=this.strMisc[I],this.textComponentList[this.textComponentList.length]=y,this.textContentList[this.textContentList.length]=y.string,A.getComponent(d).isChecked=!!I,A.on(d.EventType.TOGGLE,I?this.toggleLightingWithAlbedo:this.toggleCSMColoration,this),this.miscModeToggleList[I]=A}n-=150;for(var D=0;D<this.strComposite.length;D++){var B=D?p(this.compositeModeToggle):this.compositeModeToggle;B.setPosition(i,n-20*D,0),B.setScale(.5,.5,.5),B.parent=this.compositeModeToggle.parent;var w=B.getComponentInChildren(C);w.string=this.strComposite[D],this.textComponentList[this.textComponentList.length]=w,this.textContentList[this.textContentList.length]=w.string,B.on(d.EventType.TOGGLE,this.toggleCompositeMode,this),this.compositeModeToggleList[D]=B}}else console.error("debug-view-runtime-control should be child of Canvas")},s.isTextMatched=function(t,e){var o=new String(t),i=o.search(">");return-1===i?t===e:(o=(o=o.substr(i+1)).substr(0,o.search("<")))===e},s.toggleSingleMode=function(t){for(var e=u.root.debugView,o=t.getComponentInChildren(C),i=0;i<this.strSingle.length;i++)this.isTextMatched(o.string,this.strSingle[i])&&(e.singleMode=i)},s.toggleCompositeMode=function(t){for(var e=u.root.debugView,o=t.getComponentInChildren(C),i=0;i<this.strComposite.length;i++)this.isTextMatched(o.string,this.strComposite[i])&&e.enableCompositeMode(i,t.isChecked)},s.toggleLightingWithAlbedo=function(t){u.root.debugView.lightingWithAlbedo=t.isChecked},s.toggleCSMColoration=function(t){u.root.debugView.csmLayerColoration=t.isChecked},s.enableAllCompositeMode=function(t){var e=u.root.debugView;e.enableAllCompositeMode(!0);for(var o=0;o<this.compositeModeToggleList.length;o++){this.compositeModeToggleList[o].getComponent(d).isChecked=!0}var i=this.miscModeToggleList[0].getComponent(d);i.isChecked=!1,e.csmLayerColoration=!1,(i=this.miscModeToggleList[1].getComponent(d)).isChecked=!0,e.lightingWithAlbedo=!0},s.hideUI=function(t){var e=this.node.getChildByName("Titles"),o=!e.active;this.singleModeToggleList[0].parent.active=o,this.miscModeToggleList[0].parent.active=o,this.compositeModeToggleList[0].parent.active=o,this.EnableAllCompositeModeButton.parent.active=o,e.active=o,this.hideButtonLabel.string=o?"Hide UI":"Show UI"},s.changeTextColor=function(t){this._currentColorIndex++,this._currentColorIndex>=this.strColor.length&&(this._currentColorIndex=0);for(var e=0;e<this.textComponentList.length;e++)this.textComponentList[e].string=this.strColor[this._currentColorIndex]+this.textContentList[e]+"</color>";for(var o=0;o<this.labelComponentList.length;o++)this.labelComponentList[o].color=this.color[this._currentColorIndex]},s.onLoad=function(){},s.update=function(t){},e}(L)).prototype,"compositeModeToggle",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=e(S.prototype,"singleModeToggle",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=e(S.prototype,"EnableAllCompositeModeButton",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=S))||T));s._RF.pop()}}}));

System.register("chunks:///_virtual/env.ts",["cc"],(function(e){var t,u;return{setters:[function(e){t=e.cclegacy,u=e.sys}],execute:function(){e("useMouseInput",(function(){return!u.hasFeature(u.Feature.INPUT_TOUCH)})),t._RF.push({},"13859xrVSNHdKA4+fUKc4WE","env",void 0),t._RF.pop()}}}));

System.register("chunks:///_virtual/follow-camera-input.ts",["./rollupPluginModLoBabelHelpers.js","cc","./follow-camera.ts","./env.ts"],(function(e){var t,o,i,n,r,s,a,u,c,h,l,p,f,_,T,d;return{setters:[function(e){t=e.applyDecoratedDescriptor,o=e.inheritsLoose,i=e.initializerDefineProperty,n=e.assertThisInitialized,r=e.createForOfIteratorHelperLoose,s=e.createClass},function(e){a=e.cclegacy,u=e._decorator,c=e.input,h=e.Input,l=e.EventMouse,p=e.Vec2,f=e.toDegree,_=e.Component},function(e){T=e.FollowCamera},function(e){d=e.useMouseInput}],execute:function(){var m,v,g,M,E,y,S,b,w,O,U,z,B;a._RF.push({},"b5ee354s2ZMPqNZXz94M/wi","follow-camera-input",void 0);var D=u.ccclass,H=u.property;e("FollowCameraInput",(m=D("FollowCameraInput"),v=H(T),g=H({displayName:"Hori Rotation Speed",tooltip:"Rotation speed on horizontal axis."}),M=H({displayName:"Vert Rotation Speed",tooltip:"Vertical speed on horizontal axis."}),E=H({displayName:"Scroll Zoom Speed",tooltip:"Zoom speed with the mouse scroll wheel."}),y=H({displayName:"Touchpad Zoom Speed",tooltip:"Zoom speed with a touch pad."}),m((w=t((b=function(e){function t(){for(var t,o=arguments.length,r=new Array(o),s=0;s<o;s++)r[s]=arguments[s];return t=e.call.apply(e,[this].concat(r))||this,i(t,"camera",w,n(t)),i(t,"horizontalRotationSpeed",O,n(t)),i(t,"verticalRotationSpeed",U,n(t)),i(t,"mouseWheelSpeed",z,n(t)),i(t,"touchZoomSpeed",B,n(t)),t._interpretTouchAsMouse=!1,t._mouseButtonPressing={left:!1,right:!1,middle:!1},t._previousTwoTouchDistance=0,t._touches=[],t}o(t,e);var a=t.prototype;return a.start=function(){},a.onEnable=function(){this._interpretTouchAsMouse=d(),c.on(h.EventType.MOUSE_DOWN,this._onMouseDown,this),c.on(h.EventType.MOUSE_UP,this._onMouseUp,this),c.on(h.EventType.MOUSE_WHEEL,this._onMouseWheel,this),c.on(h.EventType.TOUCH_START,this._onTouchBegin,this),c.on(h.EventType.TOUCH_MOVE,this._onTouchMove,this),c.on(h.EventType.TOUCH_END,this._onTouchEnd,this)},a.onDisable=function(){c.off(h.EventType.MOUSE_DOWN,this._onMouseDown,this),c.off(h.EventType.MOUSE_UP,this._onMouseUp,this),c.off(h.EventType.MOUSE_WHEEL,this._onMouseWheel,this),c.off(h.EventType.TOUCH_START,this._onTouchBegin,this),c.off(h.EventType.TOUCH_MOVE,this._onTouchMove,this),c.off(h.EventType.TOUCH_END,this._onTouchEnd,this)},a.update=function(e){},a._onMouseDown=function(e){switch(e.getButton()){default:break;case l.BUTTON_LEFT:this._mouseButtonPressing.left=!0;break;case l.BUTTON_RIGHT:this._mouseButtonPressing.right=!0;break;case l.BUTTON_MIDDLE:this._mouseButtonPressing.middle=!0}},a._onMouseUp=function(e){switch(e.getButton()){default:break;case l.BUTTON_LEFT:this._mouseButtonPressing.left=!1;break;case l.BUTTON_RIGHT:this._mouseButtonPressing.right=!1;break;case l.BUTTON_MIDDLE:this._mouseButtonPressing.middle=!1}},a._onMouseWheel=function(e){var t=-this.mouseWheelSpeed*Math.sign(e.getScrollY());this.camera.zoom(t)},a._onTouchBegin=function(e){for(var t,o=e.getTouches(),i=r(o);!(t=i()).done;){var n=t.value;this._touches.length<2&&this._touches.push({id:n.getID(),location:p.clone(n.getLocation())})}},a._onTouchMove=function(e){var t=e.getTouches();if(1!==t.length){if(console.log("Touches Move: "+this._touches.length),2===this._touches.length&&2===t.length){var o=this._touches.map((function(e){var o=e.id;return t.find((function(e){return e.getID()===o}))}));if(!o.some((function(e){return!e}))){var i=this._touches[0].location,n=this._touches[1].location,r=o[0].getLocation(),s=o[1].getLocation(),a=p.subtract(new p,r,i);p.normalize(a,a);var u=p.subtract(new p,s,n);p.normalize(u,u);var c=f(p.angle(a,u));if(c>170){var h=p.distance(i,n),l=p.distance(r,s)-h;if(0!==l){var _=-this.touchZoomSpeed*l;this.camera.zoom(_)}}else if(c<10){var T=p.subtract(new p,r,i),d=T.x;if(d){var m=-d*this.horizontalRotationSpeed;this.camera.rotateHorizontal(m)}var v=T.y;if(v){var g=-v*this.verticalRotationSpeed;this.camera.rotateVertical(g)}}p.copy(i,r),p.copy(n,s)}}}else this._handSingleTouchMove(e)},a._onTouchEnd=function(e){this._touches=this._touches.filter((function(t){return e.getTouches().findIndex((function(e){return e.getID()===t.id}))<0}))},a._handSingleTouchMove=function(e){this._interpretTouchAsMouse&&!this._mouseOrTouchMoveEnabled||this._rotateHorizontalByTouchMove(e.getDeltaX(),e.getDeltaY())},a._rotateHorizontalByTouchMove=function(e,t){if(e){var o=-e*this.horizontalRotationSpeed;this.camera.rotateHorizontal(o)}if(t){var i=-t*this.verticalRotationSpeed;this.camera.rotateVertical(i)}},s(t,[{key:"_mouseOrTouchMoveEnabled",get:function(){return this._mouseButtonPressing.right}}]),t}(_)).prototype,"camera",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),O=t(b.prototype,"horizontalRotationSpeed",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),U=t(b.prototype,"verticalRotationSpeed",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),z=t(b.prototype,"mouseWheelSpeed",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),B=t(b.prototype,"touchZoomSpeed",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.01}}),S=b))||S));a._RF.pop()}}}));

System.register("chunks:///_virtual/follow-camera.ts",["./rollupPluginModLoBabelHelpers.js","cc","./interop.ts"],(function(t){var i,e,a,o,r,n,c,l,s,u,p,h,m;return{setters:[function(t){i=t.applyDecoratedDescriptor,e=t.inheritsLoose,a=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){r=t.cclegacy,n=t._decorator,c=t.Node,l=t.Vec3,s=t.math,u=t.clamp,p=t.Component},function(t){h=t.constantSpeedInterop,m=t.interopToVec3}],execute:function(){var d,f,_,y,b,D,V,g,w,z,T,v,I,N,R,A,P,k,x,H;r._RF.push({},"b8bb8VM3VZFI7OY9jbbJE1R","follow-camera",void 0);t("FollowCamera",(d=n.ccclass("FollowCamera"),f=n.executionOrder(9999),_=n.property({displayName:"Min Distance",tooltip:"Min distance from camera to the target."}),y=n.property({displayName:"Max Distance",tooltip:"Max distance from camera to the target."}),b=n.property({displayName:"Init Distance",tooltip:"Initial distance from camera to the target."}),D=n.property({displayName:"Init Hori Rotation",tooltip:"Initial horizontal rotation."}),V=n.property({displayName:"Init Vert Rotation",tooltip:"Initial vertical rotation."}),g=n.property({type:c,displayName:"target",tooltip:"The target that given camera follows."}),w=n.property({displayName:"Auto Track",tooltip:"Camera automatically follows the target. When turned on, camera automatically adjust to the back of target."}),z=n.property({displayName:"Auto Track Speed",tooltip:"Camera move speed when automatically follows the target.",visible:function(){return this.autoTraceEnabled}}),d(T=f((I=i((v=function(t){function i(){for(var i,e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return i=t.call.apply(t,[this].concat(r))||this,a(i,"minDistance",I,o(i)),a(i,"maxDistance",N,o(i)),a(i,"initialDistance",R,o(i)),a(i,"initialHorizonRotation",A,o(i)),a(i,"initialVerticalRotation",P,o(i)),a(i,"target",k,o(i)),a(i,"autoTraceEnabled",x,o(i)),a(i,"autoTraceSpeed",H,o(i)),i._lookAtPosition=new l,i._distance=0,i._desiredDistance=0,i._currentDir=s.Vec3.negate(new s.Vec3,s.Vec3.UNIT_Z),i}e(i,t);var r=i.prototype;return r.start=function(){l.copy(this._lookAtPosition,this.target.position),this._desiredDistance=this.initialDistance,this._distance=this._desiredDistance,this._rotateHorizontal(this.initialHorizonRotation),this._rotateVertical(this.initialVerticalRotation),this._updatePosition()},r.update=function(t){this._distance=h(this._distance,this._desiredDistance,t,5),this._zoom(this._distance),m(this._lookAtPosition,this._lookAtPosition,this.target.worldPosition,t,6),this._updatePosition()},r.rotateHorizontal=function(t){this._rotateHorizontal(t)},r.rotateVertical=function(t){this._rotateVertical(t)},r.zoom=function(t){this._zoomDelta(t)},r._calcTransform=function(t,i,e){var a=s.Vec3.normalize(new s.Vec3,this._currentDir);s.Quat.fromViewUp(e,a,s.Vec3.UNIT_Y),s.Vec3.add(i,t,this._currentDir)},r._updatePosition=function(){var t=new s.Vec3,i=new s.Quat;this._calcTransform(this._lookAtPosition,t,i),this.node.position=t,this.node.rotation=i},r._zoom=function(t){s.Vec3.normalize(this._currentDir,this._currentDir),s.Vec3.multiplyScalar(this._currentDir,this._currentDir,t)},r._zoomDelta=function(t){this._desiredDistance=u(this._distance+t,this.minDistance,this.maxDistance)},r._rotateHorizontal=function(t){var i=s.Quat.fromAxisAngle(new s.Quat,s.Vec3.UNIT_Y,s.toRadian(t));s.Vec3.transformQuat(this._currentDir,this._currentDir,i)},r._rotateVertical=function(t){var i=s.Vec3.normalize(new s.Vec3,this._currentDir),e=s.Vec3.UNIT_Y,a=s.Vec3.cross(new s.Vec3,i,e);s.Vec3.normalize(a,a);var o=s.toDegree(s.Vec3.angle(i,e)),r=o-s.clamp(o-t,10.01,119.99),n=s.Quat.fromAxisAngle(new s.Quat,a,s.toRadian(r));s.Vec3.transformQuat(this._currentDir,this._currentDir,n)},i}(p)).prototype,"minDistance",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.1}}),N=i(v.prototype,"maxDistance",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 20}}),R=i(v.prototype,"initialDistance",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),A=i(v.prototype,"initialHorizonRotation",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),P=i(v.prototype,"initialVerticalRotation",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 45}}),k=i(v.prototype,"target",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),x=i(v.prototype,"autoTraceEnabled",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),H=i(v.prototype,"autoTraceSpeed",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 180}}),T=v))||T)||T));r._RF.pop()}}}));

System.register("chunks:///_virtual/game.ts",["./rollupPluginModLoBabelHelpers.js","cc","./raycast.ts","./battle-system.ts","./key-input.ts","./player-controller.ts","./battle.ts","./question-system.ts","./answer-ui.ts","./monster.ts","./skill-bar.ts"],(function(t){var e,n,o,r,i,s,l,a,c,u,h,y,p,m,f,C,d;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,o=t._decorator,r=t.director,i=t.KeyCode,s=t.Vec3,l=t.Color,a=t.Component},function(t){c=t.Raycast},function(t){u=t.BattleSystem},function(t){h=t.keyInput},function(t){y=t.PlayerController},function(t){p=t.Battle},function(t){m=t.QuestionSystem},function(t){f=t.AnswerUi},function(t){C=t.Monster},function(t){d=t.SkillBar}],execute:function(){var g;n._RF.push({},"61b21wMY1hNj7bimNCBtwnU","game",void 0);var v=o.ccclass;o.property,t("Game",v("Game")(g=function(t){function n(){for(var e,n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))||this).raycast=void 0,e.battleSystem=new u,e.questionSystem=new m,e.playerController=void 0,e.answerUi=new f,e.monsters=[],e.skillBar=void 0,e}e(n,t);var o=n.prototype;return o.onLoad=function(){this.raycast=this.getComponent(c);var t=r.getScene();this.playerController=null==t?void 0:t.getComponentInChildren(y),this.skillBar=null==t?void 0:t.getComponentInChildren(d)},o.start=function(){var t,e=this;null==(t=r.getScene())||t.getComponentsInChildren(C).forEach((function(t){e.monsters.push(t),t.playerController=e.playerController,t.onDie=function(){t.die()}})),this.playerController.onDie=function(){e.monsters.forEach((function(t){t.playerController=void 0})),e.playerController.die(),e.scheduleOnce((function(){e.playerController.respawn(),e.monsters.forEach((function(t){return t.playerController=e.playerController}))}),2)},this.skillBar.skillHudList.forEach((function(t){t.skill=e.playerController.getSkill(t.id)}))},o.update=function(t){var e=this;if(!this.battleSystem.isFight&&this.raycast.hit){var n=this.playerController.getSkill(0);if(n&&this.checkMonsterInSkillRange(this.playerController,this.raycast.hit,n)&&n.canUse&&h.getKeyDown(i.DIGIT_1)){var o=this.questionSystem.getQuestion(),r=o.question,s=o.options,l=o.solution,a=o.image;this.answerUi.mount({questionContent:r,choiceContents:s,correctChoiceIndex:l,imageUrl:a,onCorrect:function(){e.battleSystem.answer(o.solution)},onWrong:function(){e.battleSystem.answer(5)}}),this.battleSystem.fight(new p(this.playerController,this.raycast.hit,o,n)),this.raycast.reset(),this.raycast.enabled=!1}}this.battleSystem.isFight||this.raycast.enabled||(this.raycast.enabled=!0,this.answerUi.unmount()),this.battleSystem.update(t)},o.checkMonsterInSkillRange=function(t,e,n){var o=new s(t.node.worldPosition);o.subtract(e.node.worldPosition);var r=o.lengthSqr()<=n.range*n.range;return r?e.material.setProperty("mainColor",l.GREEN):e.material.setProperty("mainColor",l.RED),r},n}(a))||g);n._RF.pop()}}}));

System.register("chunks:///_virtual/interop.ts",["cc"],(function(t){var r,e,n,o,u,c,a;return{setters:[function(t){r=t.cclegacy,e=t.clamp,n=t.Quat,o=t.Vec4,u=t.clamp01,c=t.EPSILON,a=t.lerp}],execute:function(){function i(t,r,n,o){if(o<=0)return r;var u=r-t;return Math.pow(u,2)<1e-8?r:t+u*e(n*o,0,1)}t({constantSpeedInterop:function(t,r,e,n){if(n<=0)return r;var o=r-t;if(Math.pow(o,2)<1e-8)return r;var c=u(e*n/Math.abs(o));return a(t,r,c)},interopTo:i,interopToQuat:function(t,r,e,a,i){if(i<=0)return n.copy(t,e);if(function(t,r,e){void 0===e&&(e=c);return n.equals(t,r,e)||o.equals(o.ZERO,new o(t.x+r.x,t.y+r.y,t.z+r.z,t.w+r.w),e)}(r,e))return n.copy(t,e);var p=u(a*i/Math.max((f=r,s=e,v=n.dot(f,s),Math.acos(2*v*v-1)),1e-6));var f,s,v;return n.slerp(t,r,e,p)},interopToVec3:function(t,r,e,n,o){return t.x=i(r.x,e.x,n,o),t.y=i(r.y,e.y,n,o),t.z=i(r.z,e.z,n,o),t}}),r._RF.push({},"9601bdO+fBOEJQBcgdp//9s","interop",void 0),r._RF.pop()}}}));

System.register("chunks:///_virtual/key-code.ts",["cc"],(function(e){var _,K;return{setters:[function(e){_=e.cclegacy,K=e.KeyCode}],execute:function(){e("getKeyCode",(function(e){return E[e]||K.NONE})),_._RF.push({},"0e673qTKtJFyIH12HP08LZQ","key-code",void 0);var E=e("Code2KeyCode",{Backspace:K.BACKSPACE,Tab:K.TAB,Enter:K.ENTER,ShiftLeft:K.SHIFT_LEFT,ControlLeft:K.CTRL_LEFT,AltLeft:K.ALT_LEFT,ShiftRight:K.SHIFT_RIGHT,ControlRight:K.CTRL_RIGHT,AltRight:K.ALT_RIGHT,Pause:K.PAUSE,CapsLock:K.CAPS_LOCK,Escape:K.ESCAPE,Space:K.SPACE,PageUp:K.PAGE_UP,PageDown:K.PAGE_DOWN,End:K.END,Home:K.HOME,ArrowLeft:K.ARROW_LEFT,ArrowUp:K.ARROW_UP,ArrowRight:K.ARROW_RIGHT,ArrowDown:K.ARROW_DOWN,Insert:K.INSERT,Delete:K.DELETE,Digit0:K.DIGIT_0,Digit1:K.DIGIT_1,Digit2:K.DIGIT_2,Digit3:K.DIGIT_3,Digit4:K.DIGIT_4,Digit5:K.DIGIT_5,Digit6:K.DIGIT_6,Digit7:K.DIGIT_7,Digit8:K.DIGIT_8,Digit9:K.DIGIT_9,KeyA:K.KEY_A,KeyB:K.KEY_B,KeyC:K.KEY_C,KeyD:K.KEY_D,KeyE:K.KEY_E,KeyF:K.KEY_F,KeyG:K.KEY_G,KeyH:K.KEY_H,KeyI:K.KEY_I,KeyJ:K.KEY_J,KeyK:K.KEY_K,KeyL:K.KEY_L,KeyM:K.KEY_M,KeyN:K.KEY_N,KeyO:K.KEY_O,KeyP:K.KEY_P,KeyQ:K.KEY_Q,KeyR:K.KEY_R,KeyS:K.KEY_S,KeyT:K.KEY_T,KeyU:K.KEY_U,KeyV:K.KEY_V,KeyW:K.KEY_W,KeyX:K.KEY_X,KeyY:K.KEY_Y,KeyZ:K.KEY_Z,Numpad0:K.NUM_0,Numpad1:K.NUM_1,Numpad2:K.NUM_2,Numpad3:K.NUM_3,Numpad4:K.NUM_4,Numpad5:K.NUM_5,Numpad6:K.NUM_6,Numpad7:K.NUM_7,Numpad8:K.NUM_8,Numpad9:K.NUM_9,NumpadMultiply:K.NUM_MULTIPLY,NumpadAdd:K.NUM_PLUS,NumpadSubtract:K.NUM_SUBTRACT,NumpadDecimal:K.NUM_DECIMAL,NumpadDivide:K.NUM_DIVIDE,NumpadEnter:K.NUM_ENTER,F1:K.F1,F2:K.F2,F3:K.F3,F4:K.F4,F5:K.F5,F6:K.F6,F7:K.F7,F8:K.F8,F9:K.F9,F10:K.F10,F11:K.F11,F12:K.F12,NumLock:K.NUM_LOCK,ScrollLock:K.SCROLL_LOCK,Semicolon:K.SEMICOLON,Equal:K.EQUAL,Comma:K.COMMA,Minus:K.DASH,Period:K.PERIOD,Slash:K.SLASH,Backquote:K.BACK_QUOTE,BracketLeft:K.BRACKET_LEFT,Backslash:K.BACKSLASH,BracketRight:K.BRACKET_RIGHT,Quote:K.QUOTE});_._RF.pop()}}}));

System.register("chunks:///_virtual/key-input.ts",["./rollupPluginModLoBabelHelpers.js","cc","./key-code.ts"],(function(e){var n,t,i,o,s,a;return{setters:[function(e){n=e.createClass},function(e){t=e.cclegacy,i=e.KeyCode,o=e.Vec3,s=e.game},function(e){a=e.getKeyCode}],execute:function(){t._RF.push({},"55987KrkIBHlJLrbvRuRAE5","key-input",void 0);e("keyInput",new(function(){function e(){this.enabled=!0,this._movement=new o,this.keyDownMap=new Map;var e,n,t=window;t&&(null==(e=s.canvas)||e.addEventListener("keydown",this.onKeyDown.bind(this)),null==(n=s.canvas)||n.addEventListener("keyup",this.onKeyUp.bind(this)),t.addEventListener("keydown",this.onKeyDown.bind(this)),t.addEventListener("keyup",this.onKeyUp.bind(this)),t.addEventListener("blur",this.onBlur.bind(this)))}var t=e.prototype;return t.updateMovement=function(){var e=this.movement,n=0;this.keyDownMap.get(i.KEY_W)&&(n+=1),this.keyDownMap.get(i.KEY_S)&&(n-=1);var t=0;this.keyDownMap.get(i.KEY_D)&&(t+=1),this.keyDownMap.get(i.KEY_A)&&(t-=1),e.z=n,e.x=t},t.onKeyDown=function(e){if(this.enabled){var n=a(e.code);this.keyDownMap.set(n,!0),this.updateMovement()}},t.onKeyUp=function(e){if(this.enabled){var n=a(e.code);this.keyDownMap.set(n,!1),this.updateMovement()}},t.onBlur=function(){this.release()},t.release=function(){this.keyDownMap.clear(),this.updateMovement()},t.enable=function(){this.enabled=!0},t.disable=function(){this.enabled=!1,this.release()},t.getAxis=function(e){return"Horizontal"==e?this._movement.x:"Vertical"==e?this._movement.z:0},t.getKeyDown=function(e){return this.keyDownMap.get(e)||!1},n(e,[{key:"movement",get:function(){return this._movement}}]),e}()));t._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./debug-view-runtime-control.ts","./follow-camera-input.ts","./follow-camera.ts","./damageable.ts","./game.ts","./key-code.ts","./key-input.ts","./monster.ts","./player-controller.ts","./raycast-layer.ts","./raycast.ts","./skill-config.ts","./skill.ts","./base-attack-skill.ts","./battle-system.ts","./battle.ts","./question-system.ts","./question.ts","./answer-ui.ts","./skill-bar.ts","./skill-hud.ts","./env.ts","./interop.ts","./node.ts","./world-space-health-bar.ts","./world-space-text.ts","./world-space-ui.ts"],(function(){return{setters:[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/monster.ts",["./rollupPluginModLoBabelHelpers.js","cc","./raycast-layer.ts","./damageable.ts"],(function(t){var i,e,n,o,s,a,r,l,c,h,d,u,p,k,f,g,m;return{setters:[function(t){i=t.applyDecoratedDescriptor,e=t.inheritsLoose,n=t.initializerDefineProperty,o=t.assertThisInitialized,s=t.createClass},function(t){a=t.cclegacy,r=t._decorator,l=t.CCInteger,c=t.Node,h=t.Vec3,d=t.Collider,u=t.MeshRenderer,p=t.randomRangeInt,k=t.Animation,f=t.tween},function(t){g=t.raycastLayer},function(t){m=t.Damageable}],execute:function(){var y,v,w,A,R,C,b,P,M;a._RF.push({},"f758fU3ftVIDI7BFVvNtO4L","monster",void 0);var D=r.ccclass,I=r.property;t("Monster",(y=D("Monster"),v=I({type:l}),w=I({type:l}),A=I(c),y((b=i((C=function(t){function i(){for(var i,e=arguments.length,s=new Array(e),a=0;a<e;a++)s[a]=arguments[a];return(i=t.call.apply(t,[this].concat(s))||this).spawnPoint=new h,i.speed=2,i.radius=2,i.isBind=!1,i.isDied=!1,i.isAttacking=!1,i.material=void 0,n(i,"attackRange",b,o(i)),n(i,"trackRange",P,o(i)),n(i,"model",M,o(i)),i.flyY=1,i.playerController=void 0,i.attackCountdown=2,i.attackTimeElapsed=0,i.movement=new h,i.lookAt=new h,i.checkRange=new h,i}e(i,t);var a=i.prototype;return a.onLoad=function(){var t;null==(t=this.getComponent(d))||t.addGroup(g.MONSTER),this.spawnPoint.set(this.node.worldPosition),this.material=this.getComponentInChildren(u).material},a.update=function(t){if(!this.isDied&&!this.isBind&&!this.isAttacking)if(this.isAttacking||(this.attackTimeElapsed+=t),this.inAttackRange())this.canAttack&&this.attack();else{if(this.inTrackRange())return this.lookAtTarget(),void this.calculateMove(t);this.IsOutScope()&&this.calculateLookAt(),this.calculateMove(t)}},a.calculateMove=function(t){this.movement.set(this.node.forward).normalize().multiplyScalar(t*this.speed),this.movement.y=0,this.movement.add(this.node.position),this.node.setPosition(this.movement)},a.calculateLookAt=function(){var t=p(0,360);this.lookAt.x=this.spawnPoint.x+this.radius*Math.cos(t/(180/Math.PI)),this.lookAt.y=this.node.position.y,this.lookAt.z=this.spawnPoint.z+this.radius*Math.sin(t/(180/Math.PI)),this.node.lookAt(this.lookAt)},a.lookAtTarget=function(){this.playerController&&(this.lookAt.set(this.playerController.node.worldPosition),this.lookAt.y=this.node.position.y,this.node.lookAt(this.lookAt))},a.IsOutScope=function(){return this.checkRange.set(this.node.position),this.checkRange.subtract(this.spawnPoint).lengthSqr()>this.radius*this.radius},a.inTrackRange=function(){return!!this.playerController&&this.checkRange.set(this.node.worldPosition).subtract(this.playerController.node.worldPosition).lengthSqr()<=this.trackRange*this.trackRange},a.inAttackRange=function(){return!!this.playerController&&this.checkRange.set(this.node.worldPosition).subtract(this.playerController.node.worldPosition).lengthSqr()<=this.attackRange*this.attackRange},a.attack=function(){var t,i=this;if(!this.isAttacking)if(this.attackTimeElapsed=0,null!=(t=this.playerController)&&t.battle)this.playerController.battle.addMonsterMate(this);else{var e=this.getComponent(k);e&&(this.isAttacking=!0,e.play("monster-attack"),e.once(k.EventType.FINISHED,(function(){i.isAttacking=!1})))}},a.onHit=function(){var t;null==(t=this.playerController)||t.applyDamage(10)},a.bind=function(){var t=this;this.isBind||this.isDied||(this.isBind=!0,f(this.model.position).to(.5,new h(0,this.flyY,0),{onUpdate:function(i){t.model.setPosition(i)}}).start())},a.unbind=function(){var t=this;this.isBind&&!this.isDied&&(this.isBind=!1,f(this.model.position).to(.5,new h(0,0,0),{onUpdate:function(i){t.model.setPosition(i)}}).start())},a.die=function(){var t=this;this.isDied||(this.isDied=!0,f(this.node.scale).to(.5,new h(0,0,0),{onUpdate:function(i){t.node.setScale(i)}}).call((function(){t.node.destroy()})).start())},s(i,[{key:"canAttack",get:function(){return this.attackTimeElapsed>this.attackCountdown}}]),i}(m)).prototype,"attackRange",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 2}}),P=i(C.prototype,"trackRange",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 6}}),M=i(C.prototype,"model",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),R=C))||R));a._RF.pop()}}}));

System.register("chunks:///_virtual/node.ts",["cc"],(function(t){var e,n;return{setters:[function(t){e=t.cclegacy,n=t.math}],execute:function(){t("getForward",(function(t){return n.Vec3.transformQuat(new n.Vec3,n.Vec3.UNIT_Z,t.worldRotation)})),e._RF.push({},"00489iffMpCQIGzKC6cturT","node",void 0),e._RF.pop()}}}));

System.register("chunks:///_virtual/player-controller.ts",["./rollupPluginModLoBabelHelpers.js","cc","./key-input.ts","./damageable.ts","./world-space-ui.ts","./base-attack-skill.ts"],(function(t){var e,i,n,o,a,r,s,l,c,h,u,d,m,p,f,g,v;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,o=t.assertThisInitialized,a=t.createClass},function(t){r=t.cclegacy,s=t._decorator,l=t.Vec3,c=t.animation,h=t.CharacterController,u=t.director,d=t.Camera,m=t.tween},function(t){p=t.keyInput},function(t){f=t.Damageable},function(t){g=t.WorldSpaceUi},function(t){v=t.BaseAttackSkill}],execute:function(){var w,y,k,C,_;r._RF.push({},"7ce52eY8A9OgrccdNng5MRU","player-controller",void 0);var S=s.ccclass,b=s.property;t("PlayerController",(w=S("PlayerController"),y=b({min:4,max:8,slide:!0}),w((_=e((C=function(t){function e(){for(var e,i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return(e=t.call.apply(t,[this].concat(a))||this).animator=void 0,e.characterController=void 0,n(e,"speed",_,o(e)),e.spawnPoint=new l,e.camera=void 0,e.skills=[new v],e.battle=void 0,e.movement=new l,e.lookAt=new l,e.cam_forward=new l,e.cam_right=new l,e.onDamaged=function(){g.instance.health(e.hp,e.maxHp)},e}i(e,t);var r=e.prototype;return r.onLoad=function(){var t;this.animator=this.getComponent(c.AnimationController),this.characterController=this.getComponent(h),this.camera=null==(t=u.getScene())?void 0:t.getComponentInChildren(d),this.node.getWorldPosition(this.spawnPoint)},r.update=function(t){this.isFight||(this.calculateMoveAndRotate(t),this.calculateSkillCountdown(t))},r.calculateMoveAndRotate=function(t){this.movement.set(p.movement),l.equals(this.movement,l.ZERO)?this.animator.setValue("speed",0):(this.cam_forward.set(this.camera.node.forward),this.cam_right.set(this.camera.node.right),this.cam_forward.y=0,this.cam_right.y=0,this.cam_forward.normalize(),this.cam_right.normalize(),this.movement.set(this.cam_forward.multiplyScalar(this.movement.z).add(this.cam_right.multiplyScalar(this.movement.x))),this.lookAt.set(this.movement).multiplyScalar(-1).add(this.node.worldPosition),this.node.lookAt(this.lookAt),this.characterController.move(this.movement.multiplyScalar(this.speed*t)),this.animator.setValue("speed",this.speed))},r.fight=function(t){this.battle=t},r.fightEnd=function(){this.battle=void 0},r.die=function(){var t=this;m(this.node.scale).to(.5,new l(0,0,0),{onUpdate:function(e){t.node.setScale(e)}}).start()},r.respawn=function(){this.reset(),this.node.setWorldPosition(this.spawnPoint),this.node.setScale(1,1,1)},r.getSkill=function(t){return this.skills.find((function(e){return e.id==t}))},r.calculateSkillCountdown=function(t){this.skills.forEach((function(e){return e.update(t)}))},a(e,[{key:"isFight",get:function(){return!!this.battle}}]),e}(f)).prototype,"speed",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 6}}),k=C))||k));r._RF.pop()}}}));

System.register("chunks:///_virtual/question-system.ts",["cc","./question.ts"],(function(e){var t,s,n;return{setters:[function(e){t=e.cclegacy,s=e.randomRangeInt},function(e){n=e.Question}],execute:function(){t._RF.push({},"8b5aatsUCxGmYlPDXMUnfBp","question-system",void 0);e("QuestionSystem",function(){function e(){this.questions=[new n("以下何者最像「物件」而非「類別」？",["台灣","校長","顯示卡","海洋"],0),new n("請針對附圖的 UML，選出最「不」符合的描述。",["每個人都至少被一個人所愛著","每個人都只能愛一個人","注定單戀，不可能互相愛上彼此","總會有人同時會被多個人愛戴"],0,"https://beta.world.waterballsa.tw/assets/media/battle/questions/chapter1/8.png"),new n("請問什麼時候會捕捉「依賴 (Dependency)」？",["當想強調「擁有權 (Ownership）」或是「控制權」時","當想捕捉「有 (Has-a)」的關係意義時","當想捕捉「是一種 (Is-a)」的關係意義時","當想捕捉「使用 (Use-a)」的關係意義時"],3),new n("以下關於「模式 (Pattern)」的定義何者正確？",["A problem is a field of forces in which the pattern resolves.","A pattern is a force to a solution in a context.","A problem is a field of forces in which the pattern arises.","A pattern is a context to a problem from a solution."],0),new n("根據附圖的類別圖來看，若此時要「萃取共同行為」，則最適當的結果為何？",["開出一個新介面，此介面上有一操作：`sleep(time: long, timeUnit: TimeUnit)`","開出兩個新類別","開出一個新介面，此介面上有一操作：`sleep(time: int)`","開出一個新介面，此介面上有一操作：`sleep()`"],0,"https://beta.world.waterballsa.tw/assets/media/battle/questions/chapter2/acb-sleep.png")]}return e.prototype.getQuestion=function(){var e=this.questions[s(0,this.questions.length)];return e.reset(),e},e}());t._RF.pop()}}}));

System.register("chunks:///_virtual/question.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(s){var e,t;return{setters:[function(s){e=s.createClass},function(s){t=s.cclegacy}],execute:function(){t._RF.push({},"4f691rvesBK8rs7Lh5+tHCm","question",void 0);s("Question",function(){function s(s,e,t,n){this.response=-1,this.question=s,this.options=e,this.solution=t,this.image=n}var t=s.prototype;return t.answer=function(s){this.isResponse||(this.response=s)},t.reset=function(){this.response=-1},e(s,[{key:"isCorrect",get:function(){return this.response==this.solution}},{key:"isResponse",get:function(){return this.response>=0}}]),s}());t._RF.pop()}}}));

System.register("chunks:///_virtual/raycast-layer.ts",["cc"],(function(t){var a;return{setters:[function(t){a=t.cclegacy}],execute:function(){a._RF.push({},"b39daVJKVBAAqsXfDu3DxoC","raycast-layer",void 0);t("raycastLayer",{MONSTER:2});a._RF.pop()}}}));

System.register("chunks:///_virtual/raycast.ts",["./rollupPluginModLoBabelHelpers.js","cc","./raycast-layer.ts","./monster.ts"],(function(t){var e,n,o,r,i,s,a,c,l,u,y,h,p,m,f,d,v,g,C;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,o=t.initializerDefineProperty,r=t.assertThisInitialized,i=t.createClass},function(t){s=t.cclegacy,a=t._decorator,c=t.geometry,l=t.director,u=t.Camera,y=t.input,h=t.Input,p=t.EventMouse,m=t.PhysicsSystem,f=t.MeshRenderer,d=t.Color,v=t.Component},function(t){g=t.raycastLayer},function(t){C=t.Monster}],execute:function(){var D,M,R;s._RF.push({},"1ac8cXHp5NDkqylQUiKBe6+","raycast",void 0);var T=a.ccclass,E=a.property;t("Raycast",T("Raycast")((R=e((M=function(t){function e(){for(var e,n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return e=t.call.apply(t,[this].concat(i))||this,o(e,"debug",R,r(e)),e.camera=void 0,e.ray=new c.Ray,e.monster=void 0,e}n(e,t);var s=e.prototype;return s.onLoad=function(){var t;this.camera=null==(t=l.getScene())?void 0:t.getComponentInChildren(u)},s.onEnable=function(){y.on(h.EventType.MOUSE_DOWN,this.onMouseDown,this)},s.onDisable=function(){y.off(h.EventType.MOUSE_DOWN,this.onMouseDown,this)},s.onMouseDown=function(t){if(t.getButton()!=p.BUTTON_RIGHT)if(this.camera.screenPointToRay(t.getLocationX(),t.getLocationY(),this.ray),m.instance.raycastClosest(this.ray,g.MONSTER)){var e=m.instance.raycastClosestResult;this.hit=e.collider.node.getComponent(C)||void 0}else this.hit=void 0},s.reset=function(){var t;null==(t=this.monster)||null==(t=t.getComponentInChildren(f))||null==(t=t.material)||t.setProperty("mainColor",d.WHITE),this.monster=void 0},i(e,[{key:"hit",get:function(){return this.monster},set:function(t){var e;this.monster!==t&&(null==(e=this.monster)||null==(e=e.getComponentInChildren(f))||null==(e=e.material)||e.setProperty("mainColor",d.WHITE));this.monster=t}}]),e}(v)).prototype,"debug",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),D=M))||D);s._RF.pop()}}}));

System.register("chunks:///_virtual/skill-bar.ts",["./rollupPluginModLoBabelHelpers.js","cc","./skill-hud.ts"],(function(t){var n,e,i,o,l,r;return{setters:[function(t){n=t.inheritsLoose},function(t){e=t.cclegacy,i=t._decorator,o=t.Button,l=t.Component},function(t){r=t.SkillHud}],execute:function(){var s;e._RF.push({},"b2eb46T3V9FDIcDGIS37RJK","skill-bar",void 0);var c=i.ccclass;i.property,t("SkillBar",c("SkillBar")(s=function(t){function e(){for(var n,e=arguments.length,i=new Array(e),o=0;o<e;o++)i[o]=arguments[o];return(n=t.call.apply(t,[this].concat(i))||this).skillHudList=[],n.selected=void 0,n}n(e,t);var i=e.prototype;return i.onLoad=function(){var t=this;this.getComponentsInChildren(r).forEach((function(n){t.skillHudList.push(n)}))},i.start=function(){var t=this;this.skillHudList.forEach((function(n){n.node.on(o.EventType.CLICK,(function(){t.onSelectSkill(n)}))}))},i.onSelectSkill=function(t){this.selected=t,t.select()},e}(l))||s);e._RF.pop()}}}));

System.register("chunks:///_virtual/skill-config.ts",["cc"],(function(){var c;return{setters:[function(e){c=e.cclegacy}],execute:function(){c._RF.push({},"edfcenvD1VNL4eKt7uY4owi","skill-config",void 0),c._RF.pop()}}}));

System.register("chunks:///_virtual/skill-hud.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(i){var t,e,r,n,o,l,s,c,a;return{setters:[function(i){t=i.applyDecoratedDescriptor,e=i.inheritsLoose,r=i.initializerDefineProperty,n=i.assertThisInitialized},function(i){o=i.cclegacy,l=i._decorator,s=i.Sprite,c=i.Color,a=i.Component}],execute:function(){var u,p,d,f,h,k;o._RF.push({},"98732kNjgNDFrAlUpC+cpQi","skill-hud",void 0);var y=l.ccclass,g=l.property;i("SkillHud",(u=y("SkillHud"),p=g(s),u((h=t((f=function(i){function t(){for(var t,e=arguments.length,o=new Array(e),l=0;l<e;l++)o[l]=arguments[l];return t=i.call.apply(i,[this].concat(o))||this,r(t,"mask",h,n(t)),t.skill=void 0,t.sprite=void 0,r(t,"id",k,n(t)),t}e(t,i);var o=t.prototype;return o.onLoad=function(){this.sprite=this.getComponent(s)},o.update=function(i){this.skill&&(this.mask.fillRange=this.skill.countdownRatio)},o.select=function(){this.sprite.color=c.YELLOW},o.unselect=function(){this.sprite.color=c.WHITE},t}(a)).prototype,"mask",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),k=t(f.prototype,"id",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),d=f))||d));o._RF.pop()}}}));

System.register("chunks:///_virtual/skill.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var n,i;return{setters:[function(t){n=t.createClass},function(t){i=t.cclegacy}],execute:function(){i._RF.push({},"6bc73asudZH/60B+mx95Gxu","skill",void 0);t("Skill",function(){function t(t){this.timeElapsed=void 0,this.config=t,this.timeElapsed=t.countdown}var i=t.prototype;return i.update=function(t){this.countdown>0&&(this.timeElapsed+=t)},i.use=function(){this.timeElapsed=0},n(t,[{key:"id",get:function(){return this.config.id}},{key:"canUse",get:function(){return this.timeElapsed>=this.config.countdown}},{key:"countdown",get:function(){return Math.max(0,this.config.countdown-this.timeElapsed)}},{key:"countdownRatio",get:function(){return 0==this.config.countdown?0:this.countdown/this.config.countdown}},{key:"range",get:function(){return this.config.range}}]),t}());i._RF.pop()}}}));

System.register("chunks:///_virtual/world-space-health-bar.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,i,a,r,o,n,c,l,s,h,p;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,a=t.initializerDefineProperty,r=t.assertThisInitialized},function(t){o=t.cclegacy,n=t._decorator,c=t.Sprite,l=t.Vec3,s=t.find,h=t.Camera,p=t.Component}],execute:function(){var u,d,v,f,g;o._RF.push({},"6130dw6SipMWLm5BGaoA+pG","world-space-health-bar",void 0);var m=n.ccclass,y=n.property;t("WorldSpaceHealthBar",(u=m("WorldSpaceHealthBar"),d=y({type:c}),u((g=e((f=function(t){function e(){for(var e,i=arguments.length,o=new Array(i),n=0;n<i;n++)o[n]=arguments[n];return e=t.call.apply(t,[this].concat(o))||this,a(e,"fill",g,r(e)),e.cam=void 0,e.target=void 0,e.vec3=new l,e}i(e,t);var o=e.prototype;return o.start=function(){var t;this.target=s("character/Health")||void 0,this.cam=(null==(t=s("Main Camera"))?void 0:t.getComponent(h))||void 0},o.lateUpdate=function(t){this.calculatePosition()},o.setRatio=function(t){this.fill.fillRange=t},o.calculatePosition=function(){this.cam&&this.target&&this.node.parent&&(this.vec3.set(this.target.worldPosition),this.cam.convertToUINode(this.vec3,this.node.parent,this.vec3),this.node.setPosition(this.vec3))},e}(p)).prototype,"fill",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),v=f))||v));o._RF.pop()}}}));

System.register("chunks:///_virtual/world-space-text.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,i,n,o,r,s,a,c,l,p;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){r=t.cclegacy,s=t._decorator,a=t.Label,c=t.Vec3,l=t.instantiate,p=t.Component}],execute:function(){var h,u,d,f,v,m,b;r._RF.push({},"f203bKxsvhOCZnFROWlxp+t","world-space-text",void 0);var y=s.ccclass,g=s.property;t("WorldSpaceText",(h=y("WorldSpaceText"),u=g({type:a}),h((v=e((f=function(t){function e(){for(var e,i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return e=t.call.apply(t,[this].concat(r))||this,n(e,"label",v,o(e)),n(e,"time",m,o(e)),n(e,"height",b,o(e)),e.timeElapsed=0,e.cam=void 0,e.position=void 0,e.vec3=new c,e}i(e,t);var r=e.prototype;return r.lateUpdate=function(t){if(this.timeElapsed>=this.time)return this.enabled=!1,void this.node.destroy();this.calculatePosition(),this.timeElapsed+=t},r.copy=function(){return l(this.node).getComponent(e)},r.init=function(t,e){this.position=t,this.cam=e,this.calculatePosition()},r.setText=function(t){this.label.string=t},r.calculatePosition=function(){if(this.cam&&this.position&&this.node.parent){var t=this.timeElapsed/this.time*this.height;this.vec3.set(this.position),this.vec3.y+=t,this.cam.convertToUINode(this.vec3,this.node.parent,this.vec3),this.node.setPosition(this.vec3)}},e}(p)).prototype,"label",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),m=e(f.prototype,"time",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),b=e(f.prototype,"height",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),d=f))||d));r._RF.pop()}}}));

System.register("chunks:///_virtual/world-space-ui.ts",["./rollupPluginModLoBabelHelpers.js","cc","./world-space-text.ts","./world-space-health-bar.ts"],(function(e){var t,a,i,r,o,n,l,c,p,s,u,d;return{setters:[function(e){t=e.applyDecoratedDescriptor,a=e.inheritsLoose,i=e.initializerDefineProperty,r=e.assertThisInitialized,o=e.createClass},function(e){n=e.cclegacy,l=e._decorator,c=e.Camera,p=e.find,s=e.Component},function(e){u=e.WorldSpaceText},function(e){d=e.WorldSpaceHealthBar}],execute:function(){var h,f,y,g,m,w,v,b,S,U;n._RF.push({},"8c767Ht4DRNz4h+kzuzqF3o","world-space-ui",void 0);var z=l.ccclass,B=l.property;e("WorldSpaceUi",(h=z("WorldSpaceUi"),f=B({type:u}),y=B({type:d}),g=B({type:c}),h(((U=function(e){function t(){for(var t,a=arguments.length,o=new Array(a),n=0;n<a;n++)o[n]=arguments[n];return t=e.call.apply(e,[this].concat(o))||this,i(t,"damageUi",v,r(t)),i(t,"healthBar",b,r(t)),i(t,"camera",S,r(t)),t}a(t,e);var n=t.prototype;return n.onLoad=function(){t.worldSpaceUi=this},n.damage=function(e,t){var a=this.damageUi.copy();a.node.parent=this.node,a.setText(e.toString()),a.init(t.getWorldPosition(),this.camera)},n.health=function(e,t){this.healthBar.setRatio(e/t)},o(t,null,[{key:"instance",get:function(){var e;this.worldSpaceUi||(this.worldSpaceUi=null==(e=p("scene-canvas"))?void 0:e.getComponent(t));return this.worldSpaceUi}}]),t}(s)).worldSpaceUi=void 0,v=t((w=U).prototype,"damageUi",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),b=t(w.prototype,"healthBar",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),S=t(w.prototype,"camera",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),m=w))||m));n._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});